{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chatbot - GDS Verified Schemes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/htmx.org@1.9.6"></script>
</head>
<body class="bg-gray-100 text-gray-900">

  <div class="max-w-2xl mx-auto py-12 px-4">
    <h1 class="text-3xl font-bold text-center mb-6">GDS Verified Schemes Chatbot</h1>

    <!-- Chat box -->
    <div id="chat-box" class="bg-white rounded-3xl shadow-lg p-6 h-96 overflow-y-scroll space-y-4">
      <!-- Messages will appear here -->
      <!-- Example message structure for reference:
      <div class="flex justify-end">
        <div class="bg-green-500 text-white px-4 py-3 rounded-2xl rounded-tr-md max-w-xs shadow-sm">
          Your message here
        </div>
      </div>
      <div class="flex justify-start">
        <div class="bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-tl-md max-w-xs shadow-sm">
          Bot response here
        </div>
      </div>
      -->
    </div>

    <!-- Chat form -->
    <form id="chat-form"
          hx-post="{% url 'chatbot' %}"
          hx-target="#chat-box"
          hx-swap="beforeend"
          hx-on::after-request="this.reset()"
          class="flex mt-4 space-x-2">
      {% csrf_token %}
      <input type="text" name="message" placeholder="Type your question..."
             class="flex-grow border-0 rounded-full p-4 focus:ring-2 focus:ring-green-500 bg-white shadow-sm"
             autocomplete="off">
      <button type="submit"
              class="bg-green-500 text-white px-6 py-3 rounded-full hover:bg-green-600 shadow-sm">
        Send
      </button>
    </form>
  </div>

  <script>
    // Auto-scroll chat box to bottom after each reply
    document.body.addEventListener("htmx:afterRequest", function() {
      const chatBox = document.getElementById("chat-box");
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>
</html>