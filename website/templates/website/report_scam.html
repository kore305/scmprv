<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Report a Scam - Safe Check</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script>
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": "#00C853",
                    "background": "#FFFFFF",
                    "content": "#1F2937",
                    "subtle": "#6B7280",
                    "border": "#D1D5DB",
                },
                fontFamily: {
                    "display": ["Public Sans", "sans-serif"]
                },
                borderRadius: {
                    "DEFAULT": "1rem",
                    "lg": "1.5rem",
                    "full": "9999px"
                },
            },
        },
    }
</script>
</head>
<body class="bg-background font-display text-content">
<div class="flex flex-col min-h-screen">
<main class="flex-grow flex items-center justify-center p-4 sm:p-6 lg:p-8">
<div class="w-full max-w-2xl bg-background space-y-8">

<!-- Header -->
<div class="text-center">
<h1 class="text-4xl font-bold">Report a Scam</h1>
<p class="mt-2 text-subtle">Help us protect others by reporting suspicious activities</p>
</div>

<!-- Messages -->
{% if messages %}
<div class="space-y-2" id="form-messages">
    {% for message in messages %}
    <div class="p-4 rounded-lg {% if message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% else %}bg-red-50 text-red-800 border border-red-200{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
</div>
<script>
    // Auto-hide messages after 5s
    setTimeout(() => {
        const msg = document.getElementById("form-messages");
        if (msg) msg.style.display = "none";
    }, 5000);
</script>
{% endif %}

<!-- Form -->
<form method="post" enctype="multipart/form-data" class="space-y-6">
    {% csrf_token %}

    <!-- Initiative Type -->
    <div>
        <label class="block text-sm font-medium mb-2" for="{{ form.initiative_type.id_for_label }}">
            Select Initiative Type
        </label>
        {{ form.initiative_type }}
        {% if form.initiative_type.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.initiative_type.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- Where did you see it? -->
    <div>
        <fieldset>
            <legend class="text-base font-medium text-content mb-4">Where did you see it?</legend>
            <div class="flex flex-wrap gap-4">
                <label class="flex items-center space-x-2">{{ form.whatsapp }} <span>WhatsApp</span></label>
                <label class="flex items-center space-x-2">{{ form.facebook }} <span>Facebook</span></label>
                <label class="flex items-center space-x-2">{{ form.email }} <span>Email</span></label>
                <label class="flex items-center space-x-2">{{ form.other }} <span>Other</span></label>
            </div>
            <p class="mt-2 text-sm text-subtle">Select all that apply.</p>
        </fieldset>
    </div>

    <!-- Reference -->
    <div>
        {{ form.reference }}
        {% if form.reference.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.reference.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- Screenshots -->
    <div>
        <label class="flex flex-col items-center justify-center w-full p-6 border rounded-lg cursor-pointer bg-background border-border hover:border-primary" 
               for="id_screenshots">
            <span class="material-symbols-outlined text-5xl text-subtle">add</span>
            <span class="mt-2 text-base font-semibold text-content">Upload Screenshot(s)</span>
            <span class="mt-1 text-sm text-subtle" id="file-count">No files selected</span>
            {{ form.screenshots }}
        </label>
        {% if form.screenshots.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.screenshots.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- Description -->
    <div>
        {{ form.description }}
        {% if form.description.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.description.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- Contact -->
    <div>
        {{ form.contact }}
        {% if form.contact.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.contact.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- Submit -->
    <div class="flex justify-end pt-4">
        <button class="px-8 py-3 rounded-full bg-primary text-white font-bold text-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary" 
                type="submit">
            Submit Report
        </button>
    </div>
</form>
</div>
</main>
</div>

<script>
// Show file count when files are selected
document.getElementById('id_screenshots').addEventListener('change', function(e) {
    const fileCount = e.target.files.length;
    const fileCountEl = document.getElementById('file-count');
    if (fileCount === 0) {
        fileCountEl.textContent = 'No files selected';
    } else if (fileCount === 1) {
        fileCountEl.textContent = '1 file selected';
    } else {
        fileCountEl.textContent = fileCount + ' files selected';
    }
});
</script>
</body>
</html>
